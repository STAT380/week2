<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>rbasics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="week2_files/libs/clipboard/clipboard.min.js"></script>
<script src="week2_files/libs/quarto-html/quarto.js"></script>
<script src="week2_files/libs/quarto-html/popper.min.js"></script>
<script src="week2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="week2_files/libs/quarto-html/anchor.min.js"></script>
<link href="week2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="week2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="week2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="week2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="week2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">rbasics</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="some-tools-well-meet" class="level1">
<h1>Some tools we’ll meet</h1>
<ul>
<li>Facts &amp; extensions from the reading
<ul>
<li><p>Create vectors using <code>c()</code>, <code>:</code>, <code>seq()</code>, <code>rep()</code>.</p></li>
<li><p>Select vector elements using the square brackets <code>[ ]</code> (have you done this before?).</p></li>
<li><p>Program using</p>
<ul>
<li><code>for</code> loop,</li>
<li><code>while</code> loop,</li>
<li><code>if</code> statements,</li>
</ul></li>
<li><p>Write an original <code>function</code> (where have you done this before?)</p></li>
<li><p>Subsetting with <code>[</code> (especially for vectors &amp; data frames)</p></li>
<li><p>Subsetting with <code>$</code> (especially for data frames &amp; lists)</p></li>
<li><p>Subsetting with <code>[[</code> (especially for lists)</p></li>
<li><p><code>read.csv</code> for reading datasets</p></li>
<li><p><code>dplyr</code></p></li>
<li><p><code>ggplot2</code></p></li>
<li><p><code>ggPlotThemes</code></p></li>
</ul></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2016/05/base-r.pdf">RStudio Cheat Sheet (on Canvas)</a></li>
<li>Nested loops (e.g., data frame indices)</li>
<li>Extracting elements from arbitrary objects (e.g.&nbsp;a regression model object)</li>
<li>Programming a simulation with &amp; without loops</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># no packages to load since we're talking about Base R!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="goals-for-today" class="level1">
<h1>Goals for today?</h1>
<ol type="1">
<li><p>in your adventures with R programming you’ll often encounter code written in base R, so we’ll meet some common syntax.</p></li>
<li><p>introduce loops as an intuitive approach to iterative tasks</p></li>
<li><p>meet the basic syntax to write your very own R functions</p></li>
<li><p>program a simulation study to better understand a counter-intuitive concept</p></li>
</ol>
<p>e.g., Confidence interval statements:</p>
<blockquote class="blockquote">
<p>“We are 95% confident that the average amount of carbon stored in each square kilometer of tropical forest is between 9,600 and 13,600 tons”</p>
</blockquote>
<blockquote class="blockquote">
<p>95% CI: 11,600 ± 2⋅1000 = (9,600, 13,600)</p>
</blockquote>
<p>What’s wrong with saying “there’s a 95% chance that the average amount of carbon stored in each square kilometer of tropical forest is between 9,600 and 13,600 tons” ??</p>
<hr>
</section>
<section id="creating-vectors" class="level1">
<h1>Creating vectors</h1>
<section id="c-is-most-common-by-far" class="level4">
<h4 class="anchored" data-anchor-id="c-is-most-common-by-far"><code>c( )</code> is most common by far</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>grade <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="cn">NA</span>, <span class="dv">5</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>grade </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  5 NA  5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(grade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we need argument `na.rm = TRUE</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(grade, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</section>
<section id="shortcut-using-for-numbers-in-sequence" class="level4">
<h4 class="anchored" data-anchor-id="shortcut-using-for-numbers-in-sequence">Shortcut using <code>:</code> for numbers in sequence</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">:</span><span class="dv">6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3 4 5 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>twoThruSix <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>twoThruSix</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3 4 5 6</code></pre>
</div>
</div>
</section>
<section id="sequences-using-seq" class="level4">
<h4 class="anchored" data-anchor-id="sequences-using-seq">Sequences using <code>seq( )</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="at">by =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6 3.8 4.0 4.2 4.4 4.6 4.8 5.0</code></pre>
</div>
</div>
</section>
<section id="repeating-a-sequence-using-rep" class="level4">
<h4 class="anchored" data-anchor-id="repeating-a-sequence-using-rep">Repeating a sequence using <code>rep( )</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>), <span class="at">times =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "B" "C" "A" "B" "C" "A" "B" "C"</code></pre>
</div>
</div>
</section>
</section>
<section id="selecting-vector-elements-with-square-brackets" class="level1">
<h1>Selecting vector elements with square brackets</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vector</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "B" "C" "1" "2" "3"</code></pre>
</div>
</div>
<section id="select-only-element-4" class="level4">
<h4 class="anchored" data-anchor-id="select-only-element-4">Select only element 4</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"</code></pre>
</div>
</div>
</section>
<section id="select-elements-2-thru-4" class="level4">
<h4 class="anchored" data-anchor-id="select-elements-2-thru-4">Select elements 2 thru 4</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "B" "C" "1"</code></pre>
</div>
</div>
</section>
<section id="select-elements-1-and-5" class="level4">
<h4 class="anchored" data-anchor-id="select-elements-1-and-5">Select elements 1 and 5</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "2"</code></pre>
</div>
</div>
</section>
<section id="excluding-vector-elements-with-square-brackets" class="level2">
<h2 class="anchored" data-anchor-id="excluding-vector-elements-with-square-brackets">Excluding Vector Elements with square brackets</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vector</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "B" "C" "1" "2" "3"</code></pre>
</div>
</div>
<section id="select-all-elements-except-element-4" class="level4">
<h4 class="anchored" data-anchor-id="select-all-elements-except-element-4">Select all elements except element 4</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "B" "C" "2" "3"</code></pre>
</div>
</div>
</section>
<section id="select-all-elements-except-elements-1-4-and-6" class="level4">
<h4 class="anchored" data-anchor-id="select-all-elements-except-elements-1-4-and-6">Select all elements except elements 1, 4, and 6</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">6</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "B" "C" "2"</code></pre>
</div>
</div>
<hr>
</section>
</section>
</section>
<section id="selecting-vector-elements-that-match-a-condition" class="level1">
<h1>Selecting Vector Elements that match a Condition</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vector of numbers</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>,  <span class="dv">6</span>, <span class="sc">-</span><span class="dv">2</span>,  <span class="dv">6</span>,  <span class="dv">5</span>,  <span class="dv">9</span>,  <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">10</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1 -1  6 -2  6  5  9  1 10 10</code></pre>
</div>
</div>
<section id="select-elements-equal-to-10" class="level4">
<h4 class="anchored" data-anchor-id="select-elements-equal-to-10">Select elements equal to 10</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>y[y <span class="sc">==</span> <span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 10</code></pre>
</div>
</div>
</section>
<section id="select-elements-less-than-zero" class="level4">
<h4 class="anchored" data-anchor-id="select-elements-less-than-zero">Select elements less than zero</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>y[y <span class="sc">&lt;</span> <span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1 -2</code></pre>
</div>
</div>
</section>
<section id="select-elements-in-the-set-1-2-5" class="level4">
<h4 class="anchored" data-anchor-id="select-elements-in-the-set-1-2-5">Select elements in the set {1, 2, 5}</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>y[y <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 5 1</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="programming-with-for-loops" class="level1">
<h1>Programming with <code>for</code> Loops</h1>
<section id="basic-for-loop-syntax" class="level4">
<h4 class="anchored" data-anchor-id="basic-for-loop-syntax">Basic <code>for</code> Loop Syntax:</h4>
<pre><code>for (index in sequence) {  
  do something  
} </code></pre>
</section>
<section id="heres-a-for-loop-that-will-do-something-for-each-number-from-1-to-4" class="level4">
<h4 class="anchored" data-anchor-id="heres-a-for-loop-that-will-do-something-for-each-number-from-1-to-4">Here’s a <code>for</code> loop that will “do something” for each number from 1 to 4</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  j <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">10</span>     <span class="co"># add 10 to the "current" value of `i` in each step of the loop</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(j)        <span class="co"># print the result of `j` for each step of the loop</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11
[1] 12
[1] 13
[1] 14</code></pre>
</div>
</div>
</section>
<section id="this-is-often-used-to-iterate-over-each-value-in-a-vector-where-xi-refers-to-element-i-of-the-vector-x" class="level4">
<h4 class="anchored" data-anchor-id="this-is-often-used-to-iterate-over-each-value-in-a-vector-where-xi-refers-to-element-i-of-the-vector-x">This is often used to iterate over each value in a vector where x[i] refers to element <code>i</code> of the vector <code>x</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>byFives <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">37</span>, <span class="at">by =</span> <span class="dv">5</span>)   <span class="co"># vector counts by 5</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>byFives </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 15 20 25 30 35</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(byFives)) {  <span class="co"># `length(byFives)` is the number of elements in the `byFives` vector </span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  j <span class="ot">&lt;-</span> byFives[i] <span class="sc">/</span> <span class="dv">3</span>           <span class="co"># divide element `i` of the `fives` vector by 3 in each step of the loop</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(j)                      <span class="co"># print the result of `j` for each step of the loop</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.333333
[1] 5
[1] 6.666667
[1] 8.333333
[1] 10
[1] 11.66667</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="programming-with-while-loops" class="level1">
<h1>Programming with <code>while</code> Loops</h1>
<section id="basic-while-loop-syntax" class="level4">
<h4 class="anchored" data-anchor-id="basic-while-loop-syntax">Basic <code>while</code> Loop Syntax:</h4>
<pre><code>while (true condition){
  do something
}</code></pre>
</section>
<section id="heres-a-while-loop-that-prints-the-index-i-while-it-is-less-than-5" class="level4">
<h4 class="anchored" data-anchor-id="heres-a-while-loop-that-prints-the-index-i-while-it-is-less-than-5">Here’s a <code>while</code> loop that prints the index <code>i</code> while it is less than 5:</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span>            <span class="co"># initialize our index variable</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;</span> <span class="dv">5</span>) {   <span class="co"># set the condition of the `while` loop</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)        <span class="co"># print the value of `i` in each step of the loop</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span>      <span class="co"># increment `i` for the next trip through the loop</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="programming-with-functions-that-you-build-yourself" class="level1">
<h1>Programming with functions (that you build yourself!)</h1>
<section id="basic-function-syntax" class="level4">
<h4 class="anchored" data-anchor-id="basic-function-syntax">Basic <code>function</code> Syntax:</h4>
<pre><code>function_name &lt;- function(arg1) {
  do something
  return(new_object)
}</code></pre>
</section>
<section id="heres-a-function-that-takes-one-number-as-an-argument-and-squares-it" class="level4">
<h4 class="anchored" data-anchor-id="heres-a-function-that-takes-one-number-as-an-argument-and-squares-it">Here’s a function that takes one number as an argument and squares it:</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>squared <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {       <span class="co"># the function will be called "squared" and takes one argument</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  calculation <span class="ot">&lt;-</span> x <span class="sc">*</span> x         <span class="co"># this shows what the function will do with the `x` argument</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(calculation)          <span class="co"># this tells the function to display the result of `calculation`</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Nothing happens until you call the new `squared( )` function that you've created:</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="fu">squared</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="programming-with-conditional-flow-if-else" class="level1">
<h1>Programming with conditional flow (if-else)</h1>
<section id="basic-if-statement-syntax" class="level4">
<h4 class="anchored" data-anchor-id="basic-if-statement-syntax">Basic <code>if</code> Statement Syntax:</h4>
<pre><code>if (condition) {
  do something
} else {
  do something different
}</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>squared_better <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {       <span class="co"># the function will be called "squared" and takes one argument</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x)) {</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"error: This function requires a numeric argument"</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    calculation <span class="ot">&lt;-</span> x <span class="sc">*</span> x         <span class="co"># this shows what the function will do with the `x` argument</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(calculation)          <span class="co"># this tells the function to display the result of `calculation`</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="fu">squared_better</span>(<span class="st">"1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "error: This function requires a numeric argument"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>var <span class="ot">&lt;-</span> <span class="dv">5</span>           <span class="co"># some variable set to 5</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (var <span class="sc">&gt;</span> <span class="dv">3</span>) {     <span class="co"># if condition</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">'Yes'</span>)     <span class="co"># do this if condition is satisfied</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">'No'</span>)      <span class="co"># do this if condition is NOT satisfied</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Yes"</code></pre>
</div>
</div>
<p>These <code>if</code> statements work well with other programming tools:</p>
<ul>
<li>Inside a loop you might test a condition with each iteration through the loop and provide alternate instructions depending on the outcome.<br>
</li>
<li>As part of a <code>function</code> you might provide different instructions depending on the argument supplied.</li>
</ul>
</section>
<section id="fine-to-link-as-many-conditions-as-needed" class="level4">
<h4 class="anchored" data-anchor-id="fine-to-link-as-many-conditions-as-needed">Fine to link as many conditions as needed:</h4>
<pre><code>if (condition){
  do something
} else if (another condition) {
  do something else
} else {
  do something different
}</code></pre>
<hr>
</section>
</section>
<section id="data-frame-operations" class="level1">
<h1>Data Frame operations</h1>
<section id="a-special-case-of-a-list-where-all-elements-are-the-same-length." class="level4">
<h4 class="anchored" data-anchor-id="a-special-case-of-a-list-where-all-elements-are-the-same-length.">A special case of a list where all elements are the same length.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>letters <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"F"</span>)    <span class="co"># create a vector</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>                                <span class="co"># create another vector</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(numbers, letters)            <span class="co"># combine them as a data frame</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  numbers letters
1       1       A
2       2       B
3       3       C
4       4       D
5       5       E
6       6       F</code></pre>
</div>
</div>
<p>You can use square brackets to select specific elements based on [row, column]…</p>
</section>
<section id="select-element-in-row-3-and-column-2" class="level4">
<h4 class="anchored" data-anchor-id="select-element-in-row-3-and-column-2">Select element in row 3 and column 2</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">3</span>, <span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C"</code></pre>
</div>
</div>
</section>
<section id="select-all-elements-in-row-4-note-comma-placement" class="level4">
<h4 class="anchored" data-anchor-id="select-all-elements-in-row-4-note-comma-placement">Select all elements in row 4 (note comma placement)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">4</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  numbers letters
4       4       D</code></pre>
</div>
</div>
</section>
<section id="select-all-elements-in-column-2-note-comma-placement-again" class="level4">
<h4 class="anchored" data-anchor-id="select-all-elements-in-column-2-note-comma-placement-again">Select all elements in column 2 (note comma placement again)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>df[ , <span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "B" "C" "D" "E" "F"</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="nested-looping-e.g.-over-rows-and-columns" class="level1">
<h1>Nested looping (e.g., over rows and columns)</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="cn">NULL</span>)  <span class="co"># we need a placeholder, and it should be a data.frame </span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>Rows <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>Cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Cols)) {           <span class="co"># outer loop processed after each complete cycle of inner loop</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Rows)) {         <span class="co"># inner loop processed most frequently</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    df2[i, j] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"Row"</span>, i, <span class="st">", Col"</span>, j)  </span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             V1            V2            V3            V4            V5
1 Row 1 , Col 1 Row 1 , Col 2 Row 1 , Col 3 Row 1 , Col 4 Row 1 , Col 5
2 Row 2 , Col 1 Row 2 , Col 2 Row 2 , Col 3 Row 2 , Col 4 Row 2 , Col 5
3 Row 3 , Col 1 Row 3 , Col 2 Row 3 , Col 3 Row 3 , Col 4 Row 3 , Col 5
4 Row 4 , Col 1 Row 4 , Col 2 Row 4 , Col 3 Row 4 , Col 4 Row 4 , Col 5
5 Row 5 , Col 1 Row 5 , Col 2 Row 5 , Col 3 Row 5 , Col 4 Row 5 , Col 5
6 Row 6 , Col 1 Row 6 , Col 2 Row 6 , Col 3 Row 6 , Col 4 Row 6 , Col 5</code></pre>
</div>
</div>
<hr>
</section>
<section id="the-dollar-sign-operator-for-data-frames" class="level1">
<h1>The dollar sign <code>$</code> operator for data frames</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(numbers, letters)    <span class="co"># same data frame used before</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  numbers letters
1       1       A
2       2       B
3       3       C
4       4       D
5       5       E
6       6       F</code></pre>
</div>
</div>
<section id="dollar-sign-used-to-select-a-variable-in-a-data-frame-by-name-and-simplify-class" class="level4">
<h4 class="anchored" data-anchor-id="dollar-sign-used-to-select-a-variable-in-a-data-frame-by-name-and-simplify-class">Dollar sign <code>$</code> used to select a variable in a data frame by name (and simplify class)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5 6</code></pre>
</div>
</div>
</section>
<section id="dollar-sign-used-to-add-a-variable-in-a-data-frame-by-name" class="level4">
<h4 class="anchored" data-anchor-id="dollar-sign-used-to-add-a-variable-in-a-data-frame-by-name">Dollar sign <code>$</code> used to add a variable in a data frame by name</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>combo <span class="ot">&lt;-</span> <span class="fu">paste</span>(letters, <span class="st">"-"</span>, numbers, <span class="st">"combo"</span>)   <span class="co"># paste is a handy function too</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>trueFalse <span class="ot">&lt;-</span> <span class="fu">c</span>(T, F, T, T, F, F)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  numbers letters       combo trueFalse
1       1       A A - 1 combo      TRUE
2       2       B B - 2 combo     FALSE
3       3       C C - 3 combo      TRUE
4       4       D D - 4 combo      TRUE
5       5       E E - 5 combo     FALSE
6       6       F F - 6 combo     FALSE</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="dollar-sign-operator-for-other-objects" class="level1">
<h1>Dollar sign <code>$</code> operator for other objects</h1>
<section id="consider-a-simple-linear-regression-model-mtcars-data-set" class="level4">
<h4 class="anchored" data-anchor-id="consider-a-simple-linear-regression-model-mtcars-data-set">Consider a simple linear regression model (<code>mtcars</code> data set):</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this is a model predicting miles per gallon from weight of the car</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>CarModel <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> mtcars)</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co"># same model, different syntax--harder to read, but $ helps auto-fill variable names</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>CarModel2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(mtcars<span class="sc">$</span>mpg <span class="sc">~</span> mtcars<span class="sc">$</span>wt)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-summary-command-will-provide-a-useful-summary-of-the-model-information" class="level4">
<h4 class="anchored" data-anchor-id="the-summary-command-will-provide-a-useful-summary-of-the-model-information">The <code>summary( )</code> command will provide a useful summary of the model information</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(CarModel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ wt, data = mtcars)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.5432 -2.3647 -0.1252  1.4096  6.8727 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  37.2851     1.8776  19.858  &lt; 2e-16 ***
wt           -5.3445     0.5591  -9.559 1.29e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.046 on 30 degrees of freedom
Multiple R-squared:  0.7528,    Adjusted R-squared:  0.7446 
F-statistic: 91.38 on 1 and 30 DF,  p-value: 1.294e-10</code></pre>
</div>
</div>
</section>
<section id="the-carmodel-object-includes-lots-more-though-as-we-can-see-through-an-str-command" class="level4">
<h4 class="anchored" data-anchor-id="the-carmodel-object-includes-lots-more-though-as-we-can-see-through-an-str-command">The <code>CarModel</code> object includes lots more though, as we can see through an <code>str()</code> command</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.3     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(CarModel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 12
 $ coefficients : Named num [1:2] 37.29 -5.34
  ..- attr(*, "names")= chr [1:2] "(Intercept)" "wt"
 $ residuals    : Named num [1:32] -2.28 -0.92 -2.09 1.3 -0.2 ...
  ..- attr(*, "names")= chr [1:32] "Mazda RX4" "Mazda RX4 Wag" "Datsun 710" "Hornet 4 Drive" ...
 $ effects      : Named num [1:32] -113.65 -29.116 -1.661 1.631 0.111 ...
  ..- attr(*, "names")= chr [1:32] "(Intercept)" "wt" "" "" ...
 $ rank         : int 2
 $ fitted.values: Named num [1:32] 23.3 21.9 24.9 20.1 18.9 ...
  ..- attr(*, "names")= chr [1:32] "Mazda RX4" "Mazda RX4 Wag" "Datsun 710" "Hornet 4 Drive" ...
 $ assign       : int [1:2] 0 1
 $ qr           :List of 5
  ..$ qr   : num [1:32, 1:2] -5.657 0.177 0.177 0.177 0.177 ...
  .. ..- attr(*, "dimnames")=List of 2
  .. ..- attr(*, "assign")= int [1:2] 0 1
  ..$ qraux: num [1:2] 1.18 1.05
  ..$ pivot: int [1:2] 1 2
  ..$ tol  : num 1e-07
  ..$ rank : int 2
  ..- attr(*, "class")= chr "qr"
 $ df.residual  : int 30
 $ xlevels      : Named list()
 $ call         : language lm(formula = mpg ~ wt, data = mtcars)
 $ terms        :Classes 'terms', 'formula'  language mpg ~ wt
  .. ..- attr(*, "variables")= language list(mpg, wt)
  .. ..- attr(*, "factors")= int [1:2, 1] 0 1
  .. .. ..- attr(*, "dimnames")=List of 2
  .. ..- attr(*, "term.labels")= chr "wt"
  .. ..- attr(*, "order")= int 1
  .. ..- attr(*, "intercept")= int 1
  .. ..- attr(*, "response")= int 1
  .. ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
  .. ..- attr(*, "predvars")= language list(mpg, wt)
  .. ..- attr(*, "dataClasses")= Named chr [1:2] "numeric" "numeric"
  .. .. ..- attr(*, "names")= chr [1:2] "mpg" "wt"
 $ model        :'data.frame':  32 obs. of  2 variables:
  ..$ mpg: num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
  ..$ wt : num [1:32] 2.62 2.88 2.32 3.21 3.44 ...
  ..- attr(*, "terms")=Classes 'terms', 'formula'  language mpg ~ wt
  .. .. ..- attr(*, "variables")= language list(mpg, wt)
  .. .. ..- attr(*, "factors")= int [1:2, 1] 0 1
  .. .. .. ..- attr(*, "dimnames")=List of 2
  .. .. ..- attr(*, "term.labels")= chr "wt"
  .. .. ..- attr(*, "order")= int 1
  .. .. ..- attr(*, "intercept")= int 1
  .. .. ..- attr(*, "response")= int 1
  .. .. ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
  .. .. ..- attr(*, "predvars")= language list(mpg, wt)
  .. .. ..- attr(*, "dataClasses")= Named chr [1:2] "numeric" "numeric"
  .. .. .. ..- attr(*, "names")= chr [1:2] "mpg" "wt"
 - attr(*, "class")= chr "lm"</code></pre>
</div>
</div>
<p>We can extract that information from <code>CarModel</code> using the dollar sign <code>$</code> operator.</p>
<p>How about coefficient estimates:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>CarModel<span class="sc">$</span>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)          wt 
  37.285126   -5.344472 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compare methods to select various elements...</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co"># double square brackets</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>CarModel[[<span class="st">"model"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg    wt
Mazda RX4           21.0 2.620
Mazda RX4 Wag       21.0 2.875
Datsun 710          22.8 2.320
Hornet 4 Drive      21.4 3.215
Hornet Sportabout   18.7 3.440
Valiant             18.1 3.460
Duster 360          14.3 3.570
Merc 240D           24.4 3.190
Merc 230            22.8 3.150
Merc 280            19.2 3.440
Merc 280C           17.8 3.440
Merc 450SE          16.4 4.070
Merc 450SL          17.3 3.730
Merc 450SLC         15.2 3.780
Cadillac Fleetwood  10.4 5.250
Lincoln Continental 10.4 5.424
Chrysler Imperial   14.7 5.345
Fiat 128            32.4 2.200
Honda Civic         30.4 1.615
Toyota Corolla      33.9 1.835
Toyota Corona       21.5 2.465
Dodge Challenger    15.5 3.520
AMC Javelin         15.2 3.435
Camaro Z28          13.3 3.840
Pontiac Firebird    19.2 3.845
Fiat X1-9           27.3 1.935
Porsche 914-2       26.0 2.140
Lotus Europa        30.4 1.513
Ford Pantera L      15.8 3.170
Ferrari Dino        19.7 2.770
Maserati Bora       15.0 3.570
Volvo 142E          21.4 2.780</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>CarModel[[<span class="st">"coefficients"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)          wt 
  37.285126   -5.344472 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dollar sign</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>CarModel<span class="sc">$</span>model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg    wt
Mazda RX4           21.0 2.620
Mazda RX4 Wag       21.0 2.875
Datsun 710          22.8 2.320
Hornet 4 Drive      21.4 3.215
Hornet Sportabout   18.7 3.440
Valiant             18.1 3.460
Duster 360          14.3 3.570
Merc 240D           24.4 3.190
Merc 230            22.8 3.150
Merc 280            19.2 3.440
Merc 280C           17.8 3.440
Merc 450SE          16.4 4.070
Merc 450SL          17.3 3.730
Merc 450SLC         15.2 3.780
Cadillac Fleetwood  10.4 5.250
Lincoln Continental 10.4 5.424
Chrysler Imperial   14.7 5.345
Fiat 128            32.4 2.200
Honda Civic         30.4 1.615
Toyota Corolla      33.9 1.835
Toyota Corona       21.5 2.465
Dodge Challenger    15.5 3.520
AMC Javelin         15.2 3.435
Camaro Z28          13.3 3.840
Pontiac Firebird    19.2 3.845
Fiat X1-9           27.3 1.935
Porsche 914-2       26.0 2.140
Lotus Europa        30.4 1.513
Ford Pantera L      15.8 3.170
Ferrari Dino        19.7 2.770
Maserati Bora       15.0 3.570
Volvo 142E          21.4 2.780</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>CarModel<span class="sc">$</span>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)          wt 
  37.285126   -5.344472 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># single square brackets... what do you expect from [ ...] ?  Would that make sense here?</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>CarModel[<span class="st">"model"</span>]         </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$model
                     mpg    wt
Mazda RX4           21.0 2.620
Mazda RX4 Wag       21.0 2.875
Datsun 710          22.8 2.320
Hornet 4 Drive      21.4 3.215
Hornet Sportabout   18.7 3.440
Valiant             18.1 3.460
Duster 360          14.3 3.570
Merc 240D           24.4 3.190
Merc 230            22.8 3.150
Merc 280            19.2 3.440
Merc 280C           17.8 3.440
Merc 450SE          16.4 4.070
Merc 450SL          17.3 3.730
Merc 450SLC         15.2 3.780
Cadillac Fleetwood  10.4 5.250
Lincoln Continental 10.4 5.424
Chrysler Imperial   14.7 5.345
Fiat 128            32.4 2.200
Honda Civic         30.4 1.615
Toyota Corolla      33.9 1.835
Toyota Corona       21.5 2.465
Dodge Challenger    15.5 3.520
AMC Javelin         15.2 3.435
Camaro Z28          13.3 3.840
Pontiac Firebird    19.2 3.845
Fiat X1-9           27.3 1.935
Porsche 914-2       26.0 2.140
Lotus Europa        30.4 1.513
Ford Pantera L      15.8 3.170
Ferrari Dino        19.7 2.770
Maserati Bora       15.0 3.570
Volvo 142E          21.4 2.780</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>CarModel[<span class="st">"coefficients"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$coefficients
(Intercept)          wt 
  37.285126   -5.344472 </code></pre>
</div>
</div>
<p>We often show residuals vs fitted values to evaluate a <code>CarModel</code> fit. The <code>CarModel</code> object stores that information for your use, so you can extract it with the <code>$</code> operator to easily retrieve it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(ggplot2)    <span class="co"># note--base r does plots too, but `ggplot2` gives you much more control</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> CarModel<span class="sc">$</span>fitted.values, <span class="at">y =</span> CarModel<span class="sc">$</span>residuals))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="week2_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For the sake of illustration, suppose you want to color the residuals by the number of cylinders as a proxy for engine size. (note it would usually make more sense to include cylinder as a variable in the model, but we’re just showing a way that you can pull information from compatible data sets together on a plot)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(ggplot2)</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> CarModel<span class="sc">$</span>fitted.values, <span class="at">y =</span> CarModel<span class="sc">$</span>residuals, <span class="at">color =</span> <span class="fu">as.factor</span>(mtcars<span class="sc">$</span>cyl)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="week2_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
</section>
<section id="simulation" class="level1">
<h1>Simulation</h1>
<section id="result-from-a-real-study-about-carbon-capture-in-tropical-forests" class="level4">
<h4 class="anchored" data-anchor-id="result-from-a-real-study-about-carbon-capture-in-tropical-forests">Result from a real study about carbon capture in tropical forests:</h4>
<blockquote class="blockquote">
<p>95% CI: 11,600 ± 2⋅1000 = (9,600, 13,600)</p>
</blockquote>
<blockquote class="blockquote">
<p>“We are 95% confident that the average amount of carbon stored in each square kilometer of tropical forest is between 9,600 and 13,600 tons”</p>
</blockquote>
<p>What’s wrong with saying “there’s a 95% chance that the average amount of carbon stored in each square kilometer of tropical forest is between 9,600 and 13,600 tons” ??</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>normDatSim <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">15</span>, <span class="at">mean =</span> <span class="dv">11600</span>, <span class="at">sd =</span> <span class="dv">1000</span>)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co"># normDatSim &lt;- rexp(n = 15, rate = 1/11600)  # a non-normal distribution for comparison</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(normDatSim))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="week2_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(normDatSim)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    One Sample t-test

data:  normDatSim
t = 37.271, df = 14, p-value = 2.072e-15
alternative hypothesis: true mean is not equal to 0
95 percent confidence interval:
 11023.60 12369.81
sample estimates:
mean of x 
  11696.7 </code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="simulation-with-loops" class="level1">
<h1>Simulation with Loops</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># simulation settings</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>nsimulations <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="dv">11600</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>sampleSize <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co"># initialize a data frame where we can store various results at each step in our simulation</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>ConfIntDat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">simulationID =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, nsimulations), </span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">lower =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, nsimulations), </span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">upper =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, nsimulations), </span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">captureMu =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, nsimulations))</span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a><span class="co"># use a loop to simulate many results and store them at each step</span></span>
<span id="cb99-14"><a href="#cb99-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>nsimulations) {                                   <span class="co"># increment 'i' from 1 to 'nsimulations'</span></span>
<span id="cb99-15"><a href="#cb99-15" aria-hidden="true" tabindex="-1"></a>  normDatSim <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n =</span> sampleSize, <span class="at">mean =</span> mu, <span class="at">sd =</span> sigma)  <span class="co"># simulate a new random sample</span></span>
<span id="cb99-16"><a href="#cb99-16" aria-hidden="true" tabindex="-1"></a>  ConfIntDat<span class="sc">$</span>simulationID[i] <span class="ot">&lt;-</span> i                             <span class="co"># store an ID for each sample</span></span>
<span id="cb99-17"><a href="#cb99-17" aria-hidden="true" tabindex="-1"></a>  ConfIntDat<span class="sc">$</span>lower[i] <span class="ot">&lt;-</span> <span class="fu">t.test</span>(normDatSim)<span class="sc">$</span>conf.int[<span class="dv">1</span>]       <span class="co"># store the lower bound of our CI</span></span>
<span id="cb99-18"><a href="#cb99-18" aria-hidden="true" tabindex="-1"></a>  ConfIntDat<span class="sc">$</span>upper[i] <span class="ot">&lt;-</span> <span class="fu">t.test</span>(normDatSim)<span class="sc">$</span>conf.int[<span class="dv">2</span>]       <span class="co"># store upper bound of our CI</span></span>
<span id="cb99-19"><a href="#cb99-19" aria-hidden="true" tabindex="-1"></a>  ConfIntDat<span class="sc">$</span>captureMu[i] <span class="ot">&lt;-</span> (mu <span class="sc">&gt;</span> ConfIntDat<span class="sc">$</span>lower[i] <span class="sc">&amp;</span> mu <span class="sc">&lt;</span> ConfIntDat<span class="sc">$</span>upper[i])</span>
<span id="cb99-20"><a href="#cb99-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-21"><a href="#cb99-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb99-22"><a href="#cb99-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-23"><a href="#cb99-23" aria-hidden="true" tabindex="-1"></a>ConfIntDat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    simulationID     lower    upper captureMu
1              1 11266.444 12645.57      TRUE
2              2 10888.081 12089.77      TRUE
3              3 11288.412 12468.86      TRUE
4              4 10966.599 11921.42      TRUE
5              5 11304.063 12401.82      TRUE
6              6 11070.802 12242.79      TRUE
7              7 11362.198 12108.07      TRUE
8              8 11028.505 12416.18      TRUE
9              9 11188.238 12594.43      TRUE
10            10 11418.987 12498.10      TRUE
11            11 11060.894 11787.40      TRUE
12            12 10956.769 12191.03      TRUE
13            13 11515.549 12546.85      TRUE
14            14 10713.898 11777.62      TRUE
15            15 10941.230 11922.00      TRUE
16            16 10858.086 11692.23      TRUE
17            17 11098.737 12302.46      TRUE
18            18 10798.086 11967.19      TRUE
19            19 10566.582 11758.73      TRUE
20            20 11094.370 12104.74      TRUE
21            21 11301.299 12446.71      TRUE
22            22 10989.373 11948.68      TRUE
23            23 11182.529 12131.68      TRUE
24            24 11085.060 12216.03      TRUE
25            25 11212.043 12507.99      TRUE
26            26 10731.943 11640.08      TRUE
27            27 10810.223 11985.93      TRUE
28            28 11028.595 11902.61      TRUE
29            29 11532.759 12281.98      TRUE
30            30 10832.949 11804.25      TRUE
31            31 11218.726 12318.01      TRUE
32            32 10574.308 11656.49      TRUE
33            33 11018.381 12303.40      TRUE
34            34 11029.573 12351.00      TRUE
35            35 11187.556 12351.49      TRUE
36            36 10743.736 11454.74     FALSE
37            37 10425.802 11660.91      TRUE
38            38 10783.654 11972.55      TRUE
39            39 10945.799 11869.33      TRUE
40            40 11113.219 12325.27      TRUE
41            41 11127.351 12295.16      TRUE
42            42 11021.629 12263.13      TRUE
43            43 11371.226 12603.83      TRUE
44            44 10842.787 12218.23      TRUE
45            45 11082.363 11908.72      TRUE
46            46 11384.462 12699.31      TRUE
47            47 11421.689 12325.49      TRUE
48            48 11102.318 12129.46      TRUE
49            49 11271.708 12576.31      TRUE
50            50 10901.962 12432.22      TRUE
51            51 11280.887 12358.46      TRUE
52            52 10893.634 11597.91     FALSE
53            53 11043.749 11848.73      TRUE
54            54 10489.193 11745.78      TRUE
55            55 11214.399 12459.86      TRUE
56            56 11050.809 12555.44      TRUE
57            57 11304.897 11963.61      TRUE
58            58 11369.119 12121.98      TRUE
59            59 10902.204 11833.51      TRUE
60            60 11019.258 12355.81      TRUE
61            61 11182.379 12353.97      TRUE
62            62 11208.348 12427.07      TRUE
63            63 11048.102 11956.25      TRUE
64            64 11579.667 12577.47      TRUE
65            65 11312.617 12089.62      TRUE
66            66 10650.330 11809.41      TRUE
67            67 11037.156 12439.17      TRUE
68            68 11163.313 12028.63      TRUE
69            69 10789.086 12014.93      TRUE
70            70 10900.725 11823.90      TRUE
71            71 11516.473 12469.71      TRUE
72            72 10932.336 11879.16      TRUE
73            73 11288.528 12157.63      TRUE
74            74 10971.555 12226.54      TRUE
75            75 11319.764 12159.41      TRUE
76            76 10627.379 11555.33     FALSE
77            77 11776.885 12703.07     FALSE
78            78 10943.043 11928.95      TRUE
79            79 10877.304 11861.41      TRUE
80            80 11554.604 12540.65      TRUE
81            81 10904.446 12004.15      TRUE
82            82 11166.371 12188.72      TRUE
83            83 11510.772 13057.32      TRUE
84            84 10994.350 12154.62      TRUE
85            85 10939.582 12095.70      TRUE
86            86 11190.077 11933.41      TRUE
87            87  9794.131 11320.56     FALSE
88            88 11365.816 12446.21      TRUE
89            89 11218.098 12018.33      TRUE
90            90 11247.412 12038.36      TRUE
91            91 11258.785 12108.38      TRUE
92            92 11115.207 12479.58      TRUE
93            93 11216.991 12399.23      TRUE
94            94 10844.797 12100.95      TRUE
95            95 10888.075 11894.62      TRUE
96            96 11118.559 12025.10      TRUE
97            97 11772.068 12533.37     FALSE
98            98 10829.846 12173.03      TRUE
99            99 11061.866 11950.50      TRUE
100          100 10929.857 12077.52      TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's plot it!</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>ConfIntDat <span class="sc">%&gt;%</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(    <span class="at">x =</span> lower,    <span class="at">y =</span> simulationID, </span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xend =</span> upper, <span class="at">yend =</span> simulationID, </span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> captureMu)) <span class="sc">+</span> </span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> mu)) <span class="sc">+</span> </span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Simulated confidence interval from Normal data"</span>) <span class="sc">+</span> </span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Index of a CI based on a simulated random sample"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="week2_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># how often did our 95% CI actually capture mu? Easy!</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(ConfIntDat<span class="sc">$</span>captureMu)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.94</code></pre>
</div>
</div>
<ul>
<li>Can you see why we call it a “95% confidence interval”?</li>
<li>Tinker with the simulation settings and try again
<ul>
<li>Explore changes to <code>nsimulations</code>, <code>mu</code>, <code>sigma</code>, and <code>sampleSize</code></li>
<li>Try changing one at a time to larger or smaller values and observe what happens</li>
</ul></li>
</ul>
<hr>
</section>
<section id="another-way-some-would-say-the-r-way" class="level1">
<h1>another way… (some would say “The R Way”)</h1>
<ul>
<li>we can make a function that handles the guts of the loop and then call the function as an argument</li>
<li>then we can leverage more efficient tools to do things way faster (vectorized functions, parallel processing, etc)</li>
</ul>
<section id="heres-the-original-code" class="level3">
<h3 class="anchored" data-anchor-id="heres-the-original-code">Here’s the original code…</h3>
<pre><code># simulation settings
nsimulations &lt;- 100
mu &lt;- 34
sigma &lt;- 5
sampleSize &lt;- 15

# initialize a data frame where we can store various results at each step in our simulation
ConfIntDat &lt;- data.frame(simulationID = rep(NA, nsimulations), 
                         lower = rep(NA, nsimulations), 
                         upper = rep(NA, nsimulations), 
                         captureMu = rep(NA, nsimulations))

# use a loop to simulate many results and store them at each step
for (i in 1:nsimulations) {                                   # increment 'i' from 1 to 'nsimulations'
  normDatSim &lt;- rnorm(n = sampleSize, mean = mu, sd = sigma)  # simulate a new random sample
  ConfIntDat$simulationID[i] &lt;- i                             # store an ID for each sample
  ConfIntDat$lower[i] &lt;- t.test(normDatSim)$conf.int[1]       # store the lower bound of our CI
  ConfIntDat$upper[i] &lt;- t.test(normDatSim)$conf.int[2]       # store upper bound of our CI
  ConfIntDat$captureMu[i] &lt;- (mu &gt; ConfIntDat$lower[i] &amp; mu &lt; ConfIntDat$upper[i])

}</code></pre>
</section>
<section id="making-a-function" class="level3">
<h3 class="anchored" data-anchor-id="making-a-function">making a function…</h3>
<ul>
<li>the simulation settings will be arguments we (or another user) might want to change</li>
<li>when in doubt, it’s better to program arguments rather than “hard code” specific values within the guts of the function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>ciSim <span class="ot">&lt;-</span> <span class="cf">function</span>(mu, sigma, sampleSize) {</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Purpose: function simulates random Normal data and constructs a 95% CI</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Arguments: </span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="do">##    mu: population mean for Normal distribution from which samples are drawn</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">##    sigma: population standard deviation for Normal distribution from which samples are drawn</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">##    sampleSize: sample size to draw from Normal distribution</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="cn">NULL</span>)</span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>  normDatSim <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n =</span> sampleSize, <span class="at">mean =</span> mu, <span class="at">sd =</span> sigma)  <span class="co"># simulate a new random sample</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a>  result[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">t.test</span>(normDatSim)<span class="sc">$</span>conf.int[<span class="dv">1</span>]                 <span class="co"># store lower bound of CI</span></span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a>  result[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">t.test</span>(normDatSim)<span class="sc">$</span>conf.int[<span class="dv">2</span>]                 <span class="co"># store upper bound of CI</span></span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a>  result[<span class="dv">3</span>] <span class="ot">&lt;-</span> (mu <span class="sc">&gt;</span> result[<span class="dv">1</span>] <span class="sc">&amp;</span> mu <span class="sc">&lt;</span> result[<span class="dv">2</span>])              <span class="co"># store mu capture result</span></span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)                                              <span class="co"># return our results</span></span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb105-15"><a href="#cb105-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-16"><a href="#cb105-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ciSim</span>(<span class="at">mu =</span> <span class="dv">34</span>, <span class="at">sigma =</span> <span class="dv">5</span>, <span class="at">sampleSize =</span> <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 27.55198

[[2]]
[1] 34.69932

[[3]]
[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="lets-use-mosaicdo-which-can-do-something-many-times-without-writing-a-loop" class="level3">
<h3 class="anchored" data-anchor-id="lets-use-mosaicdo-which-can-do-something-many-times-without-writing-a-loop">let’s use mosaic::do() which can “do” something many times without writing a loop</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mosaic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'mosaic':
  method                           from   
  fortify.SpatialPolygonsDataFrame ggplot2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
The 'mosaic' package masks several functions from core packages in order to add 
additional features.  The original behavior of these functions should not be affected by this.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'mosaic'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:Matrix':

    mean</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:dplyr':

    count, do, tally</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    cross</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:ggplot2':

    stat</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,
    quantile, sd, t.test, var</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    max, mean, min, prod, range, sample, sum</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>sim_results <span class="ot">&lt;-</span> mosaic<span class="sc">::</span><span class="fu">do</span>(<span class="dv">100</span>) <span class="sc">*</span> <span class="fu">ciSim</span>(<span class="at">mu =</span> <span class="dv">34</span>, <span class="at">sigma =</span> <span class="dv">5</span>, <span class="at">sampleSize =</span> <span class="dv">15</span>)</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>sim_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          V1       V2    V3
1    31.8748 35.91172  TRUE
2   32.56796 37.86696  TRUE
3   30.62072 37.57575  TRUE
4   31.03366 35.21557  TRUE
5   29.84497 35.03398  TRUE
6   29.90751 34.35204  TRUE
7   33.99633 37.83297  TRUE
8   29.88213 37.08007  TRUE
9   28.93421 33.81549 FALSE
10  30.49988 33.26284 FALSE
11   32.2758 37.43878  TRUE
12  29.98696 36.35478  TRUE
13  31.10579 35.62781  TRUE
14  30.14465 34.81129  TRUE
15   31.7007 38.14099  TRUE
16  30.80894 35.54697  TRUE
17  32.72963 37.31992  TRUE
18  33.40313  38.4635  TRUE
19  32.11313  36.3359  TRUE
20    32.053 37.49423  TRUE
21  28.57972 34.51532  TRUE
22  31.38346 36.59472  TRUE
23  31.38901 38.15175  TRUE
24  31.72066 36.46543  TRUE
25  30.25209 36.41832  TRUE
26  28.93981 35.67345  TRUE
27  32.75724 37.21335  TRUE
28  31.73905  37.4303  TRUE
29  28.15656 35.75591  TRUE
30  29.71931 35.39409  TRUE
31  29.19847 36.29524  TRUE
32  31.04966 37.35879  TRUE
33  29.90319 35.37367  TRUE
34  30.62028 35.52512  TRUE
35     33.04 38.14357  TRUE
36  32.85783 37.09625  TRUE
37   28.4299 36.29572  TRUE
38  33.58435 37.68612  TRUE
39  32.20317 35.53187  TRUE
40  30.45064 35.94042  TRUE
41  28.70235 34.08477  TRUE
42  31.77891 38.47156  TRUE
43  31.45682 37.21224  TRUE
44  28.80517 35.65646  TRUE
45  29.27994 34.82771  TRUE
46  30.06697 35.72665  TRUE
47  29.70956 35.71281  TRUE
48  30.69463 36.00167  TRUE
49  30.14063 35.69287  TRUE
50   30.3964 35.17013  TRUE
51  31.80803 36.70413  TRUE
52  32.30873 38.79797  TRUE
53  31.16777 35.62232  TRUE
54  32.80692 37.70188  TRUE
55  32.46579 38.06688  TRUE
56  32.21287 37.11143  TRUE
57  31.77873 38.47268  TRUE
58  31.17391 37.51949  TRUE
59   31.2402 36.48076  TRUE
60  29.87342 37.39228  TRUE
61  32.01669 38.76159  TRUE
62  30.03431 35.35516  TRUE
63   28.2502 33.26512 FALSE
64   33.1967  36.5472  TRUE
65  33.20321 39.95562  TRUE
66  29.82374 35.71458  TRUE
67  32.80337 37.80213  TRUE
68  28.45035 33.38385 FALSE
69  31.71152 38.97747  TRUE
70  29.33453 35.34823  TRUE
71  29.53483 34.60257  TRUE
72   31.0936 35.62112  TRUE
73  31.42338 37.14451  TRUE
74  31.10968 36.88055  TRUE
75  33.06835 37.28848  TRUE
76  32.04345 38.20849  TRUE
77  29.88904 34.85412  TRUE
78   30.7977 36.36869  TRUE
79  31.34115 36.12759  TRUE
80  31.48152 37.94416  TRUE
81  29.96051 35.42446  TRUE
82  28.58793 32.13637 FALSE
83   32.5356 38.25524  TRUE
84  30.01797 35.98234  TRUE
85  34.41493 37.66715 FALSE
86  29.70975  35.5238  TRUE
87  32.16816 36.71885  TRUE
88  32.00087 35.65303  TRUE
89  29.43343 37.04571  TRUE
90  31.52388 37.07565  TRUE
91  32.08703 37.67636  TRUE
92  34.89283 38.85175 FALSE
93  30.08466 36.38711  TRUE
94  32.38809 39.02871  TRUE
95  31.29754 36.31316  TRUE
96  30.67745 36.59698  TRUE
97  31.87722 36.83434  TRUE
98  30.79129 35.59767  TRUE
99  30.14712 36.08134  TRUE
100 33.75477 38.70968  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># some handy tricks to get things into a data frame as desired</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>sim_results_df <span class="ot">&lt;-</span> </span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>  sim_results <span class="sc">%&gt;%</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(<span class="at">lower =</span> <span class="fu">unlist</span>(V1),    <span class="co"># unlist() simplifies to the object class inside the list element</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">upper =</span> <span class="fu">unlist</span>(V2), </span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">muCapture =</span> <span class="fu">unlist</span>(V3)) <span class="sc">%&gt;%</span></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>() <span class="sc">%&gt;%</span>    <span class="co"># handy function to create a column that indexes each row</span></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rowname =</span> <span class="fu">parse_number</span>(rowname))</span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a>sim_results_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    rowname    lower    upper muCapture
1         1 31.87480 35.91172      TRUE
2         2 32.56796 37.86696      TRUE
3         3 30.62072 37.57575      TRUE
4         4 31.03366 35.21557      TRUE
5         5 29.84497 35.03398      TRUE
6         6 29.90751 34.35204      TRUE
7         7 33.99633 37.83297      TRUE
8         8 29.88213 37.08007      TRUE
9         9 28.93421 33.81549     FALSE
10       10 30.49988 33.26284     FALSE
11       11 32.27580 37.43878      TRUE
12       12 29.98696 36.35478      TRUE
13       13 31.10579 35.62781      TRUE
14       14 30.14465 34.81129      TRUE
15       15 31.70070 38.14099      TRUE
16       16 30.80894 35.54697      TRUE
17       17 32.72963 37.31992      TRUE
18       18 33.40313 38.46350      TRUE
19       19 32.11313 36.33590      TRUE
20       20 32.05300 37.49423      TRUE
21       21 28.57972 34.51532      TRUE
22       22 31.38346 36.59472      TRUE
23       23 31.38901 38.15175      TRUE
24       24 31.72066 36.46543      TRUE
25       25 30.25209 36.41832      TRUE
26       26 28.93981 35.67345      TRUE
27       27 32.75724 37.21335      TRUE
28       28 31.73905 37.43030      TRUE
29       29 28.15656 35.75591      TRUE
30       30 29.71931 35.39409      TRUE
31       31 29.19847 36.29524      TRUE
32       32 31.04966 37.35879      TRUE
33       33 29.90319 35.37367      TRUE
34       34 30.62028 35.52512      TRUE
35       35 33.04000 38.14357      TRUE
36       36 32.85783 37.09625      TRUE
37       37 28.42990 36.29572      TRUE
38       38 33.58435 37.68612      TRUE
39       39 32.20317 35.53187      TRUE
40       40 30.45064 35.94042      TRUE
41       41 28.70235 34.08477      TRUE
42       42 31.77891 38.47156      TRUE
43       43 31.45682 37.21224      TRUE
44       44 28.80517 35.65646      TRUE
45       45 29.27994 34.82771      TRUE
46       46 30.06697 35.72665      TRUE
47       47 29.70956 35.71281      TRUE
48       48 30.69463 36.00167      TRUE
49       49 30.14063 35.69287      TRUE
50       50 30.39640 35.17013      TRUE
51       51 31.80803 36.70413      TRUE
52       52 32.30873 38.79797      TRUE
53       53 31.16777 35.62232      TRUE
54       54 32.80692 37.70188      TRUE
55       55 32.46579 38.06688      TRUE
56       56 32.21287 37.11143      TRUE
57       57 31.77873 38.47268      TRUE
58       58 31.17391 37.51949      TRUE
59       59 31.24020 36.48076      TRUE
60       60 29.87342 37.39228      TRUE
61       61 32.01669 38.76159      TRUE
62       62 30.03431 35.35516      TRUE
63       63 28.25020 33.26512     FALSE
64       64 33.19670 36.54720      TRUE
65       65 33.20321 39.95562      TRUE
66       66 29.82374 35.71458      TRUE
67       67 32.80337 37.80213      TRUE
68       68 28.45035 33.38385     FALSE
69       69 31.71152 38.97747      TRUE
70       70 29.33453 35.34823      TRUE
71       71 29.53483 34.60257      TRUE
72       72 31.09360 35.62112      TRUE
73       73 31.42338 37.14451      TRUE
74       74 31.10968 36.88055      TRUE
75       75 33.06835 37.28848      TRUE
76       76 32.04345 38.20849      TRUE
77       77 29.88904 34.85412      TRUE
78       78 30.79770 36.36869      TRUE
79       79 31.34115 36.12759      TRUE
80       80 31.48152 37.94416      TRUE
81       81 29.96051 35.42446      TRUE
82       82 28.58793 32.13637     FALSE
83       83 32.53560 38.25524      TRUE
84       84 30.01797 35.98234      TRUE
85       85 34.41493 37.66715     FALSE
86       86 29.70975 35.52380      TRUE
87       87 32.16816 36.71885      TRUE
88       88 32.00087 35.65303      TRUE
89       89 29.43343 37.04571      TRUE
90       90 31.52388 37.07565      TRUE
91       91 32.08703 37.67636      TRUE
92       92 34.89283 38.85175     FALSE
93       93 30.08466 36.38711      TRUE
94       94 32.38809 39.02871      TRUE
95       95 31.29754 36.31316      TRUE
96       96 30.67745 36.59698      TRUE
97       97 31.87722 36.83434      TRUE
98       98 30.79129 35.59767      TRUE
99       99 30.14712 36.08134      TRUE
100     100 33.75477 38.70968      TRUE</code></pre>
</div>
</div>
</section>
<section id="plot-it" class="level3">
<h3 class="anchored" data-anchor-id="plot-it">plot it</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>sim_results_df <span class="sc">%&gt;%</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(    <span class="at">x =</span> lower,    <span class="at">y =</span> rowname, </span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xend =</span> upper, <span class="at">yend =</span> rowname, </span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> muCapture)) <span class="sc">+</span> </span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="dv">34</span>)) <span class="sc">+</span>      <span class="co"># mu reference is hard coded here because mu wasn't returned by `ciSim()`</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Simulated confidence interval from Normal data"</span>) <span class="sc">+</span> </span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Index of a CI based on a simulated random sample"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="week2_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># how often did our 95% CI actually capture mu? Easy!</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(sim_results_df<span class="sc">$</span>muCapture)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.93</code></pre>
</div>
</div>
</section>
</section>
<section id="second-part" class="level1">
<h1>Second part</h1>
<p>Consider this <code>csv</code> file:</p>
<pre><code>Name, Age, Height
Alice, 21, 5.5
Bob, 25, 6.2
Charlie, 35, 5.9</code></pre>
<p>You can hard-code this into <code>R</code> as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>data_hard_code <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Name =</span> <span class="fu">c</span>(<span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span>),</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">21</span>, <span class="dv">25</span>, <span class="dv">35</span>),</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Name =</span> <span class="fu">c</span>(<span class="fl">5.5</span>, <span class="fl">6.2</span>, <span class="fl">5.9</span>)</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>data_hard_code <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">Name</th>
<th style="text-align: right;">Age</th>
<th style="text-align: right;">Name.1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Alice</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">5.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bob</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">6.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Charlie</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">5.9</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Let’s say we want to read the CSV file from memory, you can do this as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>Name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Jon"</span>, <span class="st">"Bill"</span>, <span class="st">"Maria"</span>, <span class="st">"Ben"</span>, <span class="st">"Tina"</span>)</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>Age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">23</span>, <span class="dv">41</span>, <span class="dv">32</span>, <span class="dv">58</span>, <span class="dv">26</span>)</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Name, Age)</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(df, <span class="st">"./data/data.csv"</span>, <span class="at">row.names=</span>T)</span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>file_location <span class="ot">&lt;-</span> <span class="st">"./data/data.csv"</span></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>data_from_csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(file_location)</span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>data_from_csv <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">X</th>
<th style="text-align: left;">Name</th>
<th style="text-align: right;">Age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Jon</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Bill</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Maria</td>
<td style="text-align: right;">32</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Ben</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Tina</td>
<td style="text-align: right;">26</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>There are slightly more advanced and efficient methods:</p>
<ul>
<li><code>read_csv</code> from Tidyverse</li>
<li><code>data.table</code> package in R</li>
</ul>
<p>Once you have a dataset, you can then begin your analyses:</p>
<hr>
<section id="exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis">Exploratory Data Analysis</h2>
<p>This is where <code>dplyr</code> and <code>ggplot2</code> are super-useful, because they facilitate <strong>Exploratory Data Analysis</strong></p>
<p>Since you are already familiar with these packages, I will go through them in ⚡️ speed.</p>
<p>You’ll hear this phrase thrown around very often:</p>
<blockquote class="blockquote">
<p>“We need to clean the dataset”</p>
<p>— An anxious data scientist</p>
</blockquote>
<p>The first thing I want to ask is: <em>what makes a dataset clean?</em></p>
<p>Brainstorming:</p>
<ol type="1">
<li><p>Get rid of <code>NULL</code> and <code>NA</code> and <code>NaN</code> and <code>missing</code> entries</p></li>
<li><p>Making sure that all the values for a particular variable are of the same <code>data type</code>, e.g., <code>double</code>, or <code>character</code> or <code>logical</code></p></li>
<li><p>Every variable should have its own column</p>
<ul>
<li>A variable is something which holds “measurements”</li>
</ul></li>
<li><p>Every observation should have its own row</p></li>
<li><p>Every cell, should have a unique value</p></li>
</ol>
<p>This is what packages like <code>dplyr</code>, <code>tidyr</code> and their predecessor <code>plyr</code> set out to achieve.</p>
<p>This is where functions like:</p>
<ul>
<li><code>pivot_wider()</code></li>
<li><code>pivot_longer()</code> from <code>tidyr</code> are useful.</li>
</ul>
<section id="dplyr" class="level4">
<h4 class="anchored" data-anchor-id="dplyr"><code>dplyr</code></h4>
<p>The objective of <code>dplyr</code> is to provide a set of <em>“verbs”</em> for manipulating data.</p>
<p>Let’s take the following working example:</p>
<ol type="1">
<li>Cars (mpg) dataset</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mpg, <span class="dv">5</span>) <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 19%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 16%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">manufacturer</th>
<th style="text-align: left;">model</th>
<th style="text-align: right;">displ</th>
<th style="text-align: right;">year</th>
<th style="text-align: right;">cyl</th>
<th style="text-align: left;">trans</th>
<th style="text-align: left;">drv</th>
<th style="text-align: right;">cty</th>
<th style="text-align: right;">hwy</th>
<th style="text-align: left;">fl</th>
<th style="text-align: left;">class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m6)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(av)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
</tbody>
</table>
</div>
</div>
<ol start="2" type="1">
<li>Iris (flower petal) dataset</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris, <span class="dv">5</span>) <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">Sepal.Length</th>
<th style="text-align: right;">Sepal.Width</th>
<th style="text-align: right;">Petal.Length</th>
<th style="text-align: right;">Petal.Width</th>
<th style="text-align: left;">Species</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">3.6</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Some examples are the following:</p>
<ol type="1">
<li>Select: selects a subset of the columns</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="fu">c</span>(model, displ, class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 234 × 3
   model      displ class  
   &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;  
 1 a4           1.8 compact
 2 a4           1.8 compact
 3 a4           2   compact
 4 a4           2   compact
 5 a4           2.8 compact
 6 a4           2.8 compact
 7 a4           3.1 compact
 8 a4 quattro   1.8 compact
 9 a4 quattro   1.8 compact
10 a4 quattro   2   compact
# ℹ 224 more rows</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>We have <code>mutate</code> which creates new columns from existing ones</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sepal.Area =</span> Sepal.Length <span class="sc">*</span> Sepal.Width) <span class="sc">%&gt;%</span> </span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(., <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 11%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Sepal.Length</th>
<th style="text-align: right;">Sepal.Width</th>
<th style="text-align: right;">Petal.Length</th>
<th style="text-align: right;">Petal.Width</th>
<th style="text-align: left;">Species</th>
<th style="text-align: right;">Sepal.Area</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
<td style="text-align: right;">17.85</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
<td style="text-align: right;">14.70</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
<td style="text-align: right;">15.04</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
<td style="text-align: right;">14.26</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">3.6</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
<td style="text-align: right;">18.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.4</td>
<td style="text-align: right;">3.9</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">0.4</td>
<td style="text-align: left;">setosa</td>
<td style="text-align: right;">21.06</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">3.4</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.3</td>
<td style="text-align: left;">setosa</td>
<td style="text-align: right;">15.64</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">3.4</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
<td style="text-align: right;">17.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.4</td>
<td style="text-align: right;">2.9</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
<td style="text-align: right;">12.76</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.1</td>
<td style="text-align: left;">setosa</td>
<td style="text-align: right;">15.19</td>
</tr>
</tbody>
</table>
</div>
</div>
<ol start="3" type="1">
<li><code>filter</code></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(class <span class="sc">==</span> <span class="st">"compact"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 47 × 11
   manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
   &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
 1 audi         a4           1.8  1999     4 auto… f        18    29 p     comp…
 2 audi         a4           1.8  1999     4 manu… f        21    29 p     comp…
 3 audi         a4           2    2008     4 manu… f        20    31 p     comp…
 4 audi         a4           2    2008     4 auto… f        21    30 p     comp…
 5 audi         a4           2.8  1999     6 auto… f        16    26 p     comp…
 6 audi         a4           2.8  1999     6 manu… f        18    26 p     comp…
 7 audi         a4           3.1  2008     6 auto… f        18    27 p     comp…
 8 audi         a4 quattro   1.8  1999     4 manu… 4        18    26 p     comp…
 9 audi         a4 quattro   1.8  1999     4 auto… 4        16    25 p     comp…
10 audi         a4 quattro   2    2008     4 manu… 4        20    28 p     comp…
# ℹ 37 more rows</code></pre>
</div>
</div>
<p>Some other verbs are:</p>
<ul>
<li><code>dplyr::summary()</code>, <code>dplyr::mutate()</code></li>
<li><code>tidyr::pivot_longer()</code>, <code>tidyr::pivot_wider()</code></li>
<li><code>left_join</code>, <code>right_join</code>, <code>inner_join</code>, <code>outer_join</code></li>
</ul>
</section>
</section>
<section id="ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="ggplot2"><code>ggplot2</code></h2>
<p><code>gg</code> in <code>ggplot2</code> stands for: <strong>G</strong>rammar of <strong>G</strong>raphics. There is NO <code>ggplot1</code></p>
<p>Since you guys are super familiar, let’s look at a super quick example:</p>
<p>We start off by decalring a <code>ggplot</code> object</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now can add points to it</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>plt <span class="sc">+</span> <span class="fu">geom_point</span>(</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>Petal.Length, <span class="at">y=</span>Sepal.Length)</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="week2_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>If we want to color the points by <code>Species</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>plt <span class="sc">+</span> <span class="fu">geom_point</span>(</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>Petal.Length, <span class="at">y=</span>Sepal.Length, <span class="at">colour=</span>Species)</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="week2_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>If we want to add trendlines to these points:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>plt <span class="sc">+</span> </span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>Petal.Length, <span class="at">y=</span>Sepal.Length, <span class="at">colour=</span>Species)</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span>  </span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(</span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>Petal.Length, <span class="at">y=</span>Sepal.Length)</span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="week2_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>If we want a linear trendline then you can choose the method:</p>
<p>If we want to add trendlines to these points:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>plt <span class="sc">+</span> </span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>Petal.Length, <span class="at">y=</span>Sepal.Length, <span class="at">colour=</span>Species)</span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span>  </span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(</span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>Petal.Length, <span class="at">y=</span>Sepal.Length),</span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> lm</span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="week2_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="ggthemeassist" class="level2">
<h2 class="anchored" data-anchor-id="ggthemeassist"><code>ggthemeassist</code></h2>
<p>Done in Rstudio</p>
</section>
<section id="more-on-data-types" class="level2">
<h2 class="anchored" data-anchor-id="more-on-data-types">More on <strong>data types</strong></h2>
<ol type="1">
<li>String, e.g.&nbsp;this is a character</li>
<li>Integer, e.g.&nbsp;<code>[1,2,3]</code></li>
<li>Double, e.g.&nbsp;<code>[2.2, 3.14159, 0.9]</code></li>
<li>Booleans, e.g.&nbsp;<code>TRUE/ FALSE</code></li>
</ol>
<ul>
<li>What are factors? Factors are categorical variables.</li>
</ul>
<p>Let’s look at an example:</p>
<p><code>var</code> contains the country code for people in north america:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>var <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"USA"</span>,</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"USA"</span>,</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CAN"</span>,</span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CAN"</span>,</span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CAN"</span>,</span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CAN"</span>,</span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MEX"</span>,</span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MEX"</span></span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a>var</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "USA" "USA" "CAN" "CAN" "CAN" "CAN" "MEX" "MEX"</code></pre>
</div>
</div>
<p>To tell <code>R</code> that this is explicitly categorical and not just a vector of strings, you have to specify the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.factor</span>(var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] USA USA CAN CAN CAN CAN MEX MEX
Levels: CAN MEX USA</code></pre>
</div>
</div>
<p>Let’s look at another example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris, <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">Sepal.Length</th>
<th style="text-align: right;">Sepal.Width</th>
<th style="text-align: right;">Petal.Length</th>
<th style="text-align: right;">Petal.Width</th>
<th style="text-align: left;">Species</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>iris<span class="sc">$</span>Species</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] setosa     setosa     setosa     setosa     setosa     setosa    
  [7] setosa     setosa     setosa     setosa     setosa     setosa    
 [13] setosa     setosa     setosa     setosa     setosa     setosa    
 [19] setosa     setosa     setosa     setosa     setosa     setosa    
 [25] setosa     setosa     setosa     setosa     setosa     setosa    
 [31] setosa     setosa     setosa     setosa     setosa     setosa    
 [37] setosa     setosa     setosa     setosa     setosa     setosa    
 [43] setosa     setosa     setosa     setosa     setosa     setosa    
 [49] setosa     setosa     versicolor versicolor versicolor versicolor
 [55] versicolor versicolor versicolor versicolor versicolor versicolor
 [61] versicolor versicolor versicolor versicolor versicolor versicolor
 [67] versicolor versicolor versicolor versicolor versicolor versicolor
 [73] versicolor versicolor versicolor versicolor versicolor versicolor
 [79] versicolor versicolor versicolor versicolor versicolor versicolor
 [85] versicolor versicolor versicolor versicolor versicolor versicolor
 [91] versicolor versicolor versicolor versicolor versicolor versicolor
 [97] versicolor versicolor versicolor versicolor virginica  virginica 
[103] virginica  virginica  virginica  virginica  virginica  virginica 
[109] virginica  virginica  virginica  virginica  virginica  virginica 
[115] virginica  virginica  virginica  virginica  virginica  virginica 
[121] virginica  virginica  virginica  virginica  virginica  virginica 
[127] virginica  virginica  virginica  virginica  virginica  virginica 
[133] virginica  virginica  virginica  virginica  virginica  virginica 
[139] virginica  virginica  virginica  virginica  virginica  virginica 
[145] virginica  virginica  virginica  virginica  virginica  virginica 
Levels: setosa versicolor virginica</code></pre>
</div>
</div>
<p>Similarly, if we look at <code>mpg</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mpg, <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 19%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 16%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">manufacturer</th>
<th style="text-align: left;">model</th>
<th style="text-align: right;">displ</th>
<th style="text-align: right;">year</th>
<th style="text-align: right;">cyl</th>
<th style="text-align: left;">trans</th>
<th style="text-align: left;">drv</th>
<th style="text-align: right;">cty</th>
<th style="text-align: right;">hwy</th>
<th style="text-align: left;">fl</th>
<th style="text-align: left;">class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m6)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Let’s have a look at <code>class</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.factor</span>(mpg<span class="sc">$</span>class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] compact    compact    compact    compact    compact    compact   
  [7] compact    compact    compact    compact    compact    compact   
 [13] compact    compact    compact    midsize    midsize    midsize   
 [19] suv        suv        suv        suv        suv        2seater   
 [25] 2seater    2seater    2seater    2seater    suv        suv       
 [31] suv        suv        midsize    midsize    midsize    midsize   
 [37] midsize    minivan    minivan    minivan    minivan    minivan   
 [43] minivan    minivan    minivan    minivan    minivan    minivan   
 [49] pickup     pickup     pickup     pickup     pickup     pickup    
 [55] pickup     pickup     pickup     suv        suv        suv       
 [61] suv        suv        suv        suv        pickup     pickup    
 [67] pickup     pickup     pickup     pickup     pickup     pickup    
 [73] pickup     pickup     suv        suv        suv        suv       
 [79] suv        suv        suv        suv        suv        pickup    
 [85] pickup     pickup     pickup     pickup     pickup     pickup    
 [91] subcompact subcompact subcompact subcompact subcompact subcompact
 [97] subcompact subcompact subcompact subcompact subcompact subcompact
[103] subcompact subcompact subcompact subcompact subcompact subcompact
[109] midsize    midsize    midsize    midsize    midsize    midsize   
[115] midsize    subcompact subcompact subcompact subcompact subcompact
[121] subcompact subcompact suv        suv        suv        suv       
[127] suv        suv        suv        suv        suv        suv       
[133] suv        suv        suv        suv        suv        suv       
[139] suv        suv        suv        compact    compact    midsize   
[145] midsize    midsize    midsize    midsize    midsize    midsize   
[151] suv        suv        suv        suv        midsize    midsize   
[157] midsize    midsize    midsize    suv        suv        suv       
[163] suv        suv        suv        subcompact subcompact subcompact
[169] subcompact compact    compact    compact    compact    suv       
[175] suv        suv        suv        suv        suv        midsize   
[181] midsize    midsize    midsize    midsize    midsize    midsize   
[187] compact    compact    compact    compact    compact    compact   
[193] compact    compact    compact    compact    compact    compact   
[199] suv        suv        pickup     pickup     pickup     pickup    
[205] pickup     pickup     pickup     compact    compact    compact   
[211] compact    compact    compact    compact    compact    compact   
[217] compact    compact    compact    compact    compact    subcompact
[223] subcompact subcompact subcompact subcompact subcompact midsize   
[229] midsize    midsize    midsize    midsize    midsize    midsize   
Levels: 2seater compact midsize minivan pickup subcompact suv</code></pre>
</div>
</div>
<p>Similarly, we can have a look at the manufacturer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.factor</span>(mpg<span class="sc">$</span>manufacturer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] audi       audi       audi       audi       audi       audi      
  [7] audi       audi       audi       audi       audi       audi      
 [13] audi       audi       audi       audi       audi       audi      
 [19] chevrolet  chevrolet  chevrolet  chevrolet  chevrolet  chevrolet 
 [25] chevrolet  chevrolet  chevrolet  chevrolet  chevrolet  chevrolet 
 [31] chevrolet  chevrolet  chevrolet  chevrolet  chevrolet  chevrolet 
 [37] chevrolet  dodge      dodge      dodge      dodge      dodge     
 [43] dodge      dodge      dodge      dodge      dodge      dodge     
 [49] dodge      dodge      dodge      dodge      dodge      dodge     
 [55] dodge      dodge      dodge      dodge      dodge      dodge     
 [61] dodge      dodge      dodge      dodge      dodge      dodge     
 [67] dodge      dodge      dodge      dodge      dodge      dodge     
 [73] dodge      dodge      ford       ford       ford       ford      
 [79] ford       ford       ford       ford       ford       ford      
 [85] ford       ford       ford       ford       ford       ford      
 [91] ford       ford       ford       ford       ford       ford      
 [97] ford       ford       ford       honda      honda      honda     
[103] honda      honda      honda      honda      honda      honda     
[109] hyundai    hyundai    hyundai    hyundai    hyundai    hyundai   
[115] hyundai    hyundai    hyundai    hyundai    hyundai    hyundai   
[121] hyundai    hyundai    jeep       jeep       jeep       jeep      
[127] jeep       jeep       jeep       jeep       land rover land rover
[133] land rover land rover lincoln    lincoln    lincoln    mercury   
[139] mercury    mercury    mercury    nissan     nissan     nissan    
[145] nissan     nissan     nissan     nissan     nissan     nissan    
[151] nissan     nissan     nissan     nissan     pontiac    pontiac   
[157] pontiac    pontiac    pontiac    subaru     subaru     subaru    
[163] subaru     subaru     subaru     subaru     subaru     subaru    
[169] subaru     subaru     subaru     subaru     subaru     toyota    
[175] toyota     toyota     toyota     toyota     toyota     toyota    
[181] toyota     toyota     toyota     toyota     toyota     toyota    
[187] toyota     toyota     toyota     toyota     toyota     toyota    
[193] toyota     toyota     toyota     toyota     toyota     toyota    
[199] toyota     toyota     toyota     toyota     toyota     toyota    
[205] toyota     toyota     toyota     volkswagen volkswagen volkswagen
[211] volkswagen volkswagen volkswagen volkswagen volkswagen volkswagen
[217] volkswagen volkswagen volkswagen volkswagen volkswagen volkswagen
[223] volkswagen volkswagen volkswagen volkswagen volkswagen volkswagen
[229] volkswagen volkswagen volkswagen volkswagen volkswagen volkswagen
15 Levels: audi chevrolet dodge ford honda hyundai jeep land rover ... volkswagen</code></pre>
</div>
</div>
<p>This is where the <code>forcats</code> package is really useful:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>manufacturer <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(mpg<span class="sc">$</span>manufacturer)</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fct_reorder</span>(manufacturer, mpg<span class="sc">$</span>hwy, min)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] audi       audi       audi       audi       audi       audi      
  [7] audi       audi       audi       audi       audi       audi      
 [13] audi       audi       audi       audi       audi       audi      
 [19] chevrolet  chevrolet  chevrolet  chevrolet  chevrolet  chevrolet 
 [25] chevrolet  chevrolet  chevrolet  chevrolet  chevrolet  chevrolet 
 [31] chevrolet  chevrolet  chevrolet  chevrolet  chevrolet  chevrolet 
 [37] chevrolet  dodge      dodge      dodge      dodge      dodge     
 [43] dodge      dodge      dodge      dodge      dodge      dodge     
 [49] dodge      dodge      dodge      dodge      dodge      dodge     
 [55] dodge      dodge      dodge      dodge      dodge      dodge     
 [61] dodge      dodge      dodge      dodge      dodge      dodge     
 [67] dodge      dodge      dodge      dodge      dodge      dodge     
 [73] dodge      dodge      ford       ford       ford       ford      
 [79] ford       ford       ford       ford       ford       ford      
 [85] ford       ford       ford       ford       ford       ford      
 [91] ford       ford       ford       ford       ford       ford      
 [97] ford       ford       ford       honda      honda      honda     
[103] honda      honda      honda      honda      honda      honda     
[109] hyundai    hyundai    hyundai    hyundai    hyundai    hyundai   
[115] hyundai    hyundai    hyundai    hyundai    hyundai    hyundai   
[121] hyundai    hyundai    jeep       jeep       jeep       jeep      
[127] jeep       jeep       jeep       jeep       land rover land rover
[133] land rover land rover lincoln    lincoln    lincoln    mercury   
[139] mercury    mercury    mercury    nissan     nissan     nissan    
[145] nissan     nissan     nissan     nissan     nissan     nissan    
[151] nissan     nissan     nissan     nissan     pontiac    pontiac   
[157] pontiac    pontiac    pontiac    subaru     subaru     subaru    
[163] subaru     subaru     subaru     subaru     subaru     subaru    
[169] subaru     subaru     subaru     subaru     subaru     toyota    
[175] toyota     toyota     toyota     toyota     toyota     toyota    
[181] toyota     toyota     toyota     toyota     toyota     toyota    
[187] toyota     toyota     toyota     toyota     toyota     toyota    
[193] toyota     toyota     toyota     toyota     toyota     toyota    
[199] toyota     toyota     toyota     toyota     toyota     toyota    
[205] toyota     toyota     toyota     volkswagen volkswagen volkswagen
[211] volkswagen volkswagen volkswagen volkswagen volkswagen volkswagen
[217] volkswagen volkswagen volkswagen volkswagen volkswagen volkswagen
[223] volkswagen volkswagen volkswagen volkswagen volkswagen volkswagen
[229] volkswagen volkswagen volkswagen volkswagen volkswagen volkswagen
15 Levels: dodge jeep chevrolet ford land rover toyota lincoln ... honda</code></pre>
</div>
</div>
<p>We will be coming back to this in ~3 weeks when we dfo logistic regression.</p>
</section>
<section id="purrr" class="level2">
<h2 class="anchored" data-anchor-id="purrr"><code>purrr</code></h2>
<p>This package provides a set of functional programming tools. It’s best illustrated through an example:</p>
<p>Consider the following procedure: We want to</p>
<ol type="1">
<li>Filter <code>iris</code> by species</li>
<li>COmpute the <code>Sepal.Area</code> as <code>Sepal.Length</code> <span class="math inline">\(\times\)</span> <code>Sepal.Width</code></li>
<li>Find the average of <code>Sepal.Area</code> for every flower in the species</li>
</ol>
<div class="sourceCode" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">Area =</span> Sepal.Length <span class="sc">*</span> Sepal.Width) <span class="sc">%&gt;%</span> </span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>()</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Consider the following task:</p>
<ol type="1">
<li>Take a number <code>i</code> from <span class="math inline">\(1 \dots 10\)</span></li>
<li>Create a matrix with entries of dimension 1 … <code>i^2</code> <span class="math inline">\(\times\)</span> <code>i</code></li>
<li>Compute the average of the elements of the matrix</li>
<li>Print it</li>
</ol>
<p>One way of doing this is as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>    M <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span>i<span class="sc">*</span>i), <span class="at">nrow=</span>i</span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a>    results[i] <span class="ot">&lt;-</span> <span class="fu">mean</span>(M)</span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a>results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  3  6 10 15 21 28 36 45 55</code></pre>
</div>
</div>
<p>A functional way to think about this is as follows:</p>
<p><span class="math display">\[i \rightarrow M_{i \times i} \rightarrow mean(M)\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">function</span>(i){</span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mean</span>(</span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">matrix</span>(</span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a>                <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span>i<span class="sc">*</span>i), <span class="at">nrow=</span>i</span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb158-9"><a href="#cb158-9" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb158-10"><a href="#cb158-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb158-11"><a href="#cb158-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 1

[[2]]
[1] 3

[[3]]
[1] 6

[[4]]
[1] 10

[[5]]
[1] 15

[[6]]
[1] 21

[[7]]
[1] 28

[[8]]
[1] 36

[[9]]
[1] 45

[[10]]
[1] 55</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>